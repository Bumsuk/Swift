# File System

파일 시스템은 운영 체제 자체에 연결된 데이터 파일, 앱 및 파일의 영구 저장소를 처리합니다. 따라서 파일 시스템은 모든 프로세스에서 사용하는 기본 리소스 중 하나입니다.

기본 형식에 관계없이 장치에 연결된 모든 디스크는 물리적으로 연결되어 있든 네트워크를 통해 간접적으로 연결되어 있든 상관없이 하나의 파일 모음을 만들 수 있는 공간을 제공합니다. 파일 수는 수백만 개일 수 있으므로 파일 시스템은 디렉터리를 사용하여 계층 구조를 생성합니다. 기본 디렉토리 구조는 iOS 및 MacOS와 유사하지만, 각 시스템이 앱과 사용자 데이터를 구성하는 방식에는 차이가 있습니다.

정확한 파일 위치는 플랫폼에 따라 다르지만 가장 중요한 목표는 사용자의 파일을 쉽게 검색할 수 있도록 유지하고 코드 내부에서 사용하는 파일이 사용자의 작업에 방해가 되지 않도록 하는 것입니다.

## iOS Standard Directories: Where Files Reside

보안을 위해 iOS 앱과 파일 시스템의 상호 작용은 앱의 샌드박스 디렉터리 내의 디렉토리로 제한됩니다. 새 앱을 설치하는 동안 설치 관리자는 샌드박스 디렉토리 내에 앱에 대한 여러 컨테이너 디렉토리를 생성합니다. 각 컨테이너 디렉토리에는 특정 역할이 있습니다.

번들 컨테이너 디렉토리는 앱의 번들을 보관합니다. **bundle은 앱과 연관된 리소스들을 모아놓은 디렉토리** 입니다. Bundle에는 앱 실행 파일과 supporting resources(앱 아이콘, 이미지 파일, info.plist 등등)이 들어있습니다.

**데이터 컨테이너 디렉토리는 앱과 사용자 모두를 위한 데이터를 보관** 합니다. 데이터 컨테이너 디렉토리는 앱에서 데이터를 정렬하고 구성하는 데 사용할 수 있는 여러 하위 디렉토리로 추가로 구분됩니다.

또한 런타임에 iCloud 컨테이너와 같은 추가 컨테이너 디렉토리에 대한 액세스를 요청할 수도 있습니다.

디렉토리 구조를 그림으로 나타내면 다음과 같습니다.

<img src= "https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/art/ios_app_layout_2x.png" width = 400>

일반적으로 앱은 컨테이너 디렉토리 외부에 있는 파일에 액세스하거나 만들 수 없습니다. 이 규칙의 한 가지 예외는 앱이 공용 시스템 인터페이스를 사용하여 사용자의 연락처나 음악 등에 액세스하는 경우입니다. 이 경우 시스템 프레임워크는 도우미 앱을 사용하여 적절한 데이터 저장소에서 읽거나 수정하는 데 필요한 파일 관련 작업을 처리합니다.

일반적으로 사용되는 iOS 어플리케이션의 디렉토리를 표로 나타내면 다음과 같습니다.

|Directory|Description|
|--|--|
|AppName.app (Bundle)| 앱의 번들입니다. 이 디렉터리에는 앱과 해당 모든 리소스가 포함되어 있습니다. 이 디렉토리에 쓰기 엑세스 권한을 얻을 수 없습니다. 무단 변경을 방지하기 위해 설치 시 번들 디렉토리에 서명됩니다. 그러나 애플리케이션 번들에 저장된 리소스에 대한 읽기 전용 액세스 권한은 얻을 수 있습니다.|
|Documents/|사용자가 생성한 콘텐츠를 저장하려면 이 디렉토리를 사용합니다. 이 디렉토리의 내용은 파일 공유를 통해 사용자가 사용할 수 있도록 만들 수 있으므로, 디렉토리에는 사용자에게 노출하고자 하는 파일만 포함되어야 합니다.|
|Library/|사용자 데이터 파일이 아닌 파일의 최상위 디렉터리입니다. 사용자에게 노출되지 않을 파일에 대해 라이브러리 하위 디렉토리를 사용합니다. 앱에서 사용자 데이터 파일에 이러한 디렉토리를 사용하면 안 됩니다. (Document나 tmp 사용)|
|tmp/|이 디렉토리를 사용하여 앱의 시작 사이에 유지할 필요가 없는 임시 파일을 작성합니다. 더 이상 필요하지 않은 파일은 앱에서 제거해야 합니다. 앱이 실행되고 있지 않으면 시스템에서 이 디렉토리를 제거할 것 입니다.|


iOS 앱은 문서, 라이브러리 및 tmp 디렉토리에 추가 디렉토리를 생성할 수 있습니다. 이렇게 하면 해당 위치에 있는 파일을 더 잘 구성할 수 있습니다.

### Reference:

- https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html
